<!DOCTYPE html>
<!-- å®£å‘Šé€™æ˜¯ HTML5 æ–‡ä»¶ -->
<html>
<!-- æ•´å€‹ HTML æ–‡ä»¶é–‹å§‹ -->

<head>
  <!-- headï¼šæ”¾è¨­å®šã€CSSã€æ¨™é¡Œï¼Œä¸æœƒç›´æ¥é¡¯ç¤ºåœ¨é é¢ä¸Š -->

  <meta charset="utf-8">
  <!-- UTF-8 ç·¨ç¢¼ï¼Œé¿å…ä¸­æ–‡äº‚ç¢¼ -->

  <title>èª²ç¨‹å ±å</title>
  <!-- ç€è¦½å™¨åˆ†é æ¨™é¡Œ -->

  <link rel="stylesheet" href="/static/style.css">
  <!-- å¼•å…¥å¤–éƒ¨ CSSï¼ˆä½ çš„å…±ç”¨æ¨£å¼ï¼‰ -->

  <style>
    /* ä»¥ä¸‹æ˜¯æœ¬é é¢å°ˆç”¨çš„ CSSï¼ˆæœƒè¦†è“‹éƒ¨åˆ† style.cssï¼‰ */

    .form-group { margin: 10px 0; }
    /* æ¯å€‹æ¬„ä½å€å¡Šä¸Šä¸‹ç•™ 10px */

    .form-group label { display: block; margin-bottom: 6px; }
    /* label ä½”ä¸€æ•´è¡Œã€ä¸‹æ–¹ç•™ 6px */

    input[type="text"] { width: 100%; max-width: 520px; padding: 8px; box-sizing: border-box; }
    /* æ–‡å­—è¼¸å…¥æ¡†ï¼šå¯¬100%ã€æœ€å¤§520pxã€å…§è·8pxã€box-sizingé¿å…å¯¬åº¦æº¢å‡º */

    button { margin-top: 14px; padding: 6px 6px; }
    /* æŒ‰éˆ•ï¼šä¸Šæ–¹ç•™ 14pxã€å…§è· 6x6 */

    .step-title { margin-top: 16px; margin-bottom: 8px; }
    /* æ­¥é©Ÿæ¨™é¡Œï¼šä¸Š 16pxã€ä¸‹ 8px */

    .hint-title { font-weight: bold; margin: 8px 0; }
    /* æç¤ºæ–‡å­—ï¼šç²—é«”ã€ä¸Šä¸‹ 8px */

    /* ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼·åˆ¶é å·¦ + åœ“åœˆåœ¨æ–‡å­—å‰ */
    #role-options{
      width: 100% !important;
      /* å®¹å™¨å¯¬åº¦æ»¿ç‰ˆï¼Œé¿å…è¢«ç¸®å°æˆ–ç½®ä¸­ */

      display: block !important;
      /* å¼·åˆ¶å€å¡Šå…ƒç´  */

      text-align: left !important;
      /* è£¡é¢å…§å®¹é å·¦ */

      margin: 0 !important;
      /* å¤–è·æ­¸é›¶ */

      padding: 0 !important;
      /* å…§è·æ­¸é›¶ */
    }

    #role-options .role-list{
      display: flex !important;
      /* ä½¿ç”¨ flex ä½ˆå±€ */

      flex-direction: column !important;
      /* ç›´åˆ—æ’åˆ—ï¼ˆä¸Šåˆ°ä¸‹ï¼‰ */

      align-items: flex-start !important;
      /* å­å…ƒç´ é å·¦ */

      gap: 12px !important;
      /* æ¯å€‹é¸é …ä¸Šä¸‹é–“è·ï¼ˆèˆ’æœä¸æ“ ï¼‰ */

      margin: 2px 0 0 0 !important;
      /* ä¸Šæ–¹ç•™ 2px */

      padding: 0 !important;
      /* å…§è·æ­¸é›¶ */
    }

    /* ç”¨ label åŒ…ä½ input+æ–‡å­—ï¼Œä¸¦å¼·åˆ¶ input åœ¨å‰ã€æ–‡å­—åœ¨å¾Œ */
    #role-options label.role-choice{
      display: flex !important;
      /* label å…§éƒ¨ç”¨ flexï¼Œradio å’Œæ–‡å­—æ’ä¸€è¡Œ */

      flex-direction: row !important;
      /* å¼·åˆ¶å·¦â†’å³æ’åˆ— */

      direction: ltr !important;
      /* é˜²æ­¢è¢«æ”¹æˆå³â†’å·¦ï¼ˆRTLï¼‰ */

      align-items: center !important;
      /* å‚ç›´ç½®ä¸­ */

      justify-content: flex-start !important;
      /* å¾å·¦é–‹å§‹æ’ */

      width: auto !important;
      /* ä¸è¦æ’æ»¿æ•´è¡Œï¼Œé¿å…è¢«æ‹‰é–‹ */

      margin: 0 !important;
      /* å¤–è· 0 */

      padding: 0 !important;
      /* å…§è· 0 */

      gap: 2px !important;
      /* åœ“åœˆè·Ÿæ–‡å­—è·é›¢ï¼ˆä½ å¸Œæœ›æ›´è¿‘ï¼‰ */

      cursor: pointer;
      /* æ»‘é¼ ç§»ä¸Šå»è®Šæ‰‹æŒ‡ */

      user-select: none;
      /* ä¸è®“æ–‡å­—è¢«æ‹–æ‹‰é¸å– */

      float: none !important;
      /* é¿å…è¢« float å½±éŸ¿ä½ç½® */

      text-align: left !important;
      /* æ–‡å­—é å·¦ */
    }

    #role-options label.role-choice input[type="radio"]{
      order: 0 !important;
      /* ä¿è­‰ radio æ°¸é ç¬¬ä¸€å€‹ */

      margin: 0 !important;
      /* å–æ¶ˆ radio é è¨­å¤–è· */
    }

    #role-options label.role-choice span.role-text{
      order: 1 !important;
      /* ä¿è­‰æ–‡å­—æ°¸é åœ¨ radio å¾Œé¢ */

      margin: 0 !important;
      /* å¤–è· 0 */

      padding: 0 !important;
      /* å…§è· 0 */

      white-space: nowrap !important;
      /* ä¸æ›è¡Œ */
    }
  </style>
</head>

<body>
  <!-- bodyï¼šä½¿ç”¨è€…çœ‹å¾—åˆ°çš„ç•«é¢ -->

  <div class="container">
    <!-- å¤–å±¤å®¹å™¨ï¼ˆé€šå¸¸ç”¨ä¾†æ§åˆ¶æ•´é«”å¯¬åº¦/ç½®ä¸­ï¼‰ -->

    <div class="topbar">
      <!-- ä¸Šæ–¹å°è¦½åˆ—å€å¡Š -->

      <h1>èª²ç¨‹å ±å</h1>
      <!-- å¤§æ¨™é¡Œ -->

      <div>
        <a href="/">ğŸ  å›é¦–é </a>
        <!-- å›é¦–é é€£çµ -->
      </div>
    </div>

    <hr>
    <!-- åˆ†éš”ç·š -->

    <p>
      èª²ç¨‹ï¼š{{ course.course_date }} {{ course.start_time }}-{{ course.end_time }}ï½œ{{ course.course_name }}
    </p>
    <!-- é¡¯ç¤ºèª²ç¨‹è³‡è¨Šï¼ˆJinja2 è®Šæ•¸ï¼‰ -->

    <p>å‰©é¤˜åé¡ï¼š{{ course.remaining }} / {{ course.capacity }}</p>
    <!-- é¡¯ç¤ºåé¡ -->

    <form method="POST">
      <!-- è¡¨å–®ï¼Œç”¨ POST é€å‡º -->

      <h3 class="step-title">ç¬¬ä¸€æ­¥ï¼šé¸æ“‡èº«åˆ†</h3>
      <!-- ç¬¬ä¸€æ­¥æ¨™é¡Œ -->

      <div id="role-options">
      <!-- èº«åˆ†é¸æ“‡å€ -->

      <div class="role-list">
      <!-- ç›´åˆ—å®¹å™¨ -->

      <label class="role-choice">
      <!-- é»æ–‡å­—ä¹Ÿèƒ½é¸æ“‡ï¼ˆlabel åŒ…ä½ input+æ–‡å­—ï¼‰ -->

      <input type="radio" name="role" value="student" required>
      <!-- é¸é …ï¼šå­¸ç”Ÿï¼ˆå¿…é ˆé¸ä¸€å€‹ï¼‰ -->

      <span class="role-text">å­¸ç”Ÿ</span>
      <!-- é¡¯ç¤ºæ–‡å­—ï¼šå­¸ç”Ÿ -->
    </label>

          <label class="role-choice">
            <!-- ç¬¬äºŒå€‹é¸é …ï¼šè€å¸« -->

            <input type="radio" name="role" value="teacher" required>
            <!-- é¸é …ï¼šè€å¸« -->

            <span class="role-text">è€å¸«</span>
            <!-- é¡¯ç¤ºæ–‡å­—ï¼šè€å¸« -->
          </label>
        </div>
      </div>

      <div id="step2" style="display:none;">
        <!-- ç¬¬äºŒæ­¥å…§å®¹ï¼šé è¨­éš±è—ï¼Œé¸èº«åˆ†å¾Œæ‰é¡¯ç¤º -->

        <h3 class="step-title">ç¬¬äºŒæ­¥ï¼šå¡«å¯«å ±åè³‡æ–™</h3>
        <!-- ç¬¬äºŒæ­¥æ¨™é¡Œ -->

        <div id="student-title" class="hint-title" style="display:none;">å­¸ç”Ÿè¦å¡«</div>
        <!-- é¡¯ç¤ºã€Œå­¸ç”Ÿè¦å¡«ã€çš„æç¤ºï¼ˆé è¨­éš±è—ï¼‰ -->

        <div id="teacher-title" class="hint-title" style="display:none;">è€å¸«è¦å¡«</div>
        <!-- é¡¯ç¤ºã€Œè€å¸«è¦å¡«ã€çš„æç¤ºï¼ˆé è¨­éš±è—ï¼‰ -->

        <div class="form-group">
          <!-- å§“åæ¬„ä½å€ -->

          <label for="name">å§“å</label>
          <!-- label æŒ‡å‘ id="name" -->

          <input type="text" id="name" name="name" required>
          <!-- å§“åè¼¸å…¥æ¡†ï¼ˆå¿…å¡«ï¼‰ -->
        </div>

        <div class="form-group" id="student-only" style="display:none;">
          <!-- å­¸ç”Ÿå°ˆç”¨å€ï¼šå­¸è™Ÿï¼ˆé è¨­éš±è—ï¼‰ -->

          <label for="student_id">å­¸è™Ÿ</label>
          <!-- label æŒ‡å‘ id="student_id" -->

          <input type="text" id="student_id" name="student_id">
          <!-- å­¸è™Ÿè¼¸å…¥æ¡†ï¼ˆJS æœƒåœ¨é¸å­¸ç”Ÿæ™‚æ”¹æˆå¿…å¡«ï¼‰ -->
        </div>

        <div class="form-group" id="teacher-only" style="display:none;">
          <!-- è€å¸«å°ˆç”¨å€ï¼šæœå‹™å–®ä½ï¼ˆé è¨­éš±è—ï¼‰ -->

          <label for="unit">æœå‹™å–®ä½</label>
          <!-- label æŒ‡å‘ id="unit" -->

          <input type="text" id="unit" name="unit">
          <!-- æœå‹™å–®ä½è¼¸å…¥æ¡†ï¼ˆJS æœƒåœ¨é¸è€å¸«æ™‚æ”¹æˆå¿…å¡«ï¼‰ -->
        </div>

        <div class="form-group">
          <!-- é›»è©±æ¬„ä½å€ -->

          <label for="phone">é›»è©±</label>
          <!-- label æŒ‡å‘ id="phone" -->

          <input type="text" id="phone" name="phone" required>
          <!-- é›»è©±è¼¸å…¥æ¡†ï¼ˆå¿…å¡«ï¼‰ -->
        </div>

        <button type="submit">é€å‡ºå ±å</button>
        <!-- é€å‡ºæŒ‰éˆ• -->
      </div>
    </form>
  </div>

  <script>
    // å–å¾—ç¬¬äºŒæ­¥çš„æ•´å€‹å€å¡Š
    const step2 = document.getElementById("step2");

    // å–å¾—å­¸ç”Ÿ/è€å¸«å°ˆç”¨æ¬„ä½å®¹å™¨
    const studentOnly = document.getElementById("student-only");
    const teacherOnly = document.getElementById("teacher-only");

    // å–å¾—ã€Œå­¸ç”Ÿè¦å¡« / è€å¸«è¦å¡«ã€æç¤ºæ–‡å­—
    const studentTitle = document.getElementById("student-title");
    const teacherTitle = document.getElementById("teacher-title");

    // å–å¾—å­¸è™Ÿ/æœå‹™å–®ä½è¼¸å…¥æ¡†ï¼ˆç­‰ä¸‹è¦æ”¹ requiredï¼‰
    const studentIdInput = document.getElementById("student_id");
    const unitInput = document.getElementById("unit");

    // ä¾ç…§é¸æ“‡çš„èº«åˆ†æ›´æ–°ç•«é¢
    function updateFormByRole() {
      // æ‰¾å‡ºç›®å‰è¢«é¸åˆ°çš„ roleï¼ˆstudent/teacherï¼‰
      const role = document.querySelector('input[name="role"]:checked')?.value;

      // å¦‚æœé‚„æ²’é¸èº«åˆ†ï¼Œå°±éš±è—ç¬¬äºŒæ­¥
      if (!role) {
        step2.style.display = "none";
        return;
      }

      // æœ‰é¸èº«åˆ†ï¼Œå°±é¡¯ç¤ºç¬¬äºŒæ­¥
      step2.style.display = "block";

      // å¦‚æœæ˜¯å­¸ç”Ÿ
      if (role === "student") {
        studentTitle.style.display = "block";  // é¡¯ç¤ºå­¸ç”Ÿæç¤º
        teacherTitle.style.display = "none";   // éš±è—è€å¸«æç¤º

        studentOnly.style.display = "block";   // é¡¯ç¤ºå­¸è™Ÿæ¬„ä½
        teacherOnly.style.display = "none";    // éš±è—æœå‹™å–®ä½æ¬„ä½

        studentIdInput.required = true;        // å­¸è™Ÿå¿…å¡«
        unitInput.required = false;            // æœå‹™å–®ä½ä¸å¿…å¡«
        unitInput.value = "";                  // æ¸…ç©ºæœå‹™å–®ä½
      } else {
        // å¦‚æœæ˜¯è€å¸«
        studentTitle.style.display = "none";   // éš±è—å­¸ç”Ÿæç¤º
        teacherTitle.style.display = "block";  // é¡¯ç¤ºè€å¸«æç¤º

        studentOnly.style.display = "none";    // éš±è—å­¸è™Ÿæ¬„ä½
        teacherOnly.style.display = "block";   // é¡¯ç¤ºæœå‹™å–®ä½æ¬„ä½

        studentIdInput.required = false;       // å­¸è™Ÿä¸å¿…å¡«
        unitInput.required = true;             // æœå‹™å–®ä½å¿…å¡«
        studentIdInput.value = "";             // æ¸…ç©ºå­¸è™Ÿ
      }
    }

    // ç›£è½å…©å€‹ radioï¼ˆå­¸ç”Ÿ/è€å¸«ï¼‰çš„åˆ‡æ›
    document.querySelectorAll('input[name="role"]').forEach(el => {
      el.addEventListener("change", updateFormByRole);
    });

    // é é¢è¼‰å…¥æ™‚å…ˆè·‘ä¸€æ¬¡ï¼Œç¢ºä¿ç‹€æ…‹æ­£ç¢º
    updateFormByRole();
  </script>
</body>
</html>
